{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rff96\\\\Documents\\\\GitHub\\\\cop4331-large-project\\\\client\\\\src\\\\pages\\\\Dashboard\\\\testpage.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { BoxContainer } from \"../LoginSignUp/common\";\nimport { spotifyLogout, connect } from '../../features/spotify/spotifySlice';\nimport { logout, reset } from '../../features/auth/authSlice';\nimport { toast } from 'react-toastify';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function Testpage() {\n  _s();\n  const {\n    user\n  } = useSelector(store => store.auth);\n  const {\n    isConnected,\n    isLoading,\n    token,\n    isError,\n    message\n  } = useSelector(store => store.spotify);\n  //! TODO - check for rate limiting error because code is perfect\n\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    // Check for error\n    if (isError) {\n      toast.error(message);\n    }\n\n    //!\n    // if (!user) {\n    //     navigate('/')\n    // }\n    // dispatch(connect())\n  }, [isError, message]);\n  const onClick = e => {\n    e.preventDefault();\n\n    // window.open('http://localhost:5555/api/spotify/connect', '_self');\n    // window.location.href = 'http://localhost:5555/api/spotify/connect'\n\n    dispatch(connect()).then(() => {\n      if (isError) {\n        toast.error(message);\n      }\n      navigate(\"/home\", {\n        replacae: true\n      });\n    });\n    return true;\n  };\n  const onLogout = () => {\n    dispatch(logout()).then(() => {\n      navigate(\"/\", {\n        replace: true\n      });\n    }).then(() => {\n      dispatch(reset());\n    });\n  };\n  const onSpotifyLogout = () => {\n    dispatch(spotifyLogout()).then(() => {\n      window.location.reload();\n    });\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(BoxContainer, {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"LOADING ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 31\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this);\n  }\n\n  // Onclick triggers first\n  // HREF is followed after if onClick returns true\n  return /*#__PURE__*/_jsxDEV(BoxContainer, {\n    children: !isConnected ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome \", user && user.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \" Logged in to Anthem \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"http://localhost:5555/api/spotify/connect\",\n        target: \"_self\",\n        children: \" 1. PRE Connect to spotify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#\",\n        target: \"_self\",\n        onClick: onClick,\n        children: \" 2. Connect to spotify \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onLogout,\n        className: \"btn btn-block\",\n        children: \"Logout of Anthem\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \" Logged in to Anthem and spotify !!!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onSpotifyLogout,\n        className: \"btn btn-block\",\n        children: \"Disconnect Spotify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onLogout,\n        className: \"btn btn-block\",\n        children: \"Logout of Anthem\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" Token: \", JSON.stringify(token)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 13\n  }, this);\n}\n_s(Testpage, \"btoZHmvt9PMw2Ji5HxTkyIUQsoA=\", false, function () {\n  return [useSelector, useSelector, useNavigate, useDispatch];\n});\n_c = Testpage;\nvar _c;\n$RefreshReg$(_c, \"Testpage\");","map":{"version":3,"names":["React","useSelector","useDispatch","useEffect","useNavigate","Link","BoxContainer","spotifyLogout","connect","logout","reset","toast","axios","Testpage","user","store","auth","isConnected","isLoading","token","isError","message","spotify","navigate","dispatch","error","onClick","e","preventDefault","then","replacae","onLogout","replace","onSpotifyLogout","window","location","reload","name","JSON","stringify"],"sources":["C:/Users/rff96/Documents/GitHub/cop4331-large-project/client/src/pages/Dashboard/testpage.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useEffect } from 'react' \r\nimport { useNavigate, Link} from 'react-router-dom';\r\nimport { BoxContainer } from \"../LoginSignUp/common\";\r\nimport { spotifyLogout, connect } from '../../features/spotify/spotifySlice'\r\nimport { logout, reset } from '../../features/auth/authSlice'\r\nimport  {toast} from 'react-toastify'\r\nimport axios from \"axios\";\r\n\r\n\r\nexport function Testpage() {\r\n\r\n    const { user } = useSelector((store) => store.auth)\r\n    const { isConnected, isLoading, token, isError, message} = useSelector((store) => store.spotify)\r\n    //! TODO - check for rate limiting error because code is perfect\r\n\r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n\r\n        // Check for error\r\n        if(isError) {\r\n            toast.error(message)\r\n        }\r\n\r\n        //!\r\n        // if (!user) {\r\n        //     navigate('/')\r\n        // }\r\n        // dispatch(connect())\r\n\r\n    }, [isError, message])\r\n\r\n    const onClick = (e) => {\r\n        e.preventDefault() \r\n\r\n        // window.open('http://localhost:5555/api/spotify/connect', '_self');\r\n        // window.location.href = 'http://localhost:5555/api/spotify/connect'\r\n\r\n        dispatch(connect())\r\n        .then(() => {\r\n            if(isError) {\r\n                toast.error(message)\r\n            }\r\n            navigate(\"/home\", { replacae: true})\r\n        })\r\n        return true\r\n    }\r\n\r\n    const onLogout = () => {\r\n        dispatch(logout())\r\n        .then(() => {\r\n            navigate(\"/\", { replace: true })\r\n          })\r\n        .then(() => {\r\n            dispatch(reset())\r\n        })\r\n    }\r\n\r\n    const onSpotifyLogout = () => {\r\n        dispatch(spotifyLogout())\r\n        .then(() => {\r\n            window.location.reload()\r\n        })\r\n    }\r\n\r\n    if (isLoading) {\r\n        return (<BoxContainer><h1>LOADING ...</h1></BoxContainer>)\r\n    }\r\n\r\n    // Onclick triggers first\r\n    // HREF is followed after if onClick returns true\r\n    return (<BoxContainer>\r\n        {!isConnected ? (<>\r\n            <h1>Welcome {user && user.name}</h1>\r\n            <h1> Logged in to Anthem </h1>\r\n            {/* <button onClick={onClick} className='btn btn-block'>Connect to spotify</button> */}\r\n            <a href=\"http://localhost:5555/api/spotify/connect\" target=\"_self\" > 1. PRE Connect to spotify</a>\r\n            <a href=\"#\" target=\"_self\" onClick={onClick}> 2. Connect to spotify </a>\r\n            <button onClick={onLogout} className='btn btn-block'>Logout of Anthem</button>\r\n        </>) : (<>\r\n            <h1> Logged in to Anthem and spotify !!!</h1>\r\n            <button onClick={onSpotifyLogout} className='btn btn-block'>Disconnect Spotify</button>\r\n            <button onClick={onLogout} className='btn btn-block'>Logout of Anthem</button>\r\n            <p> Token: {JSON.stringify(token)}</p>\r\n         </>)}   \r\n    </BoxContainer>)\r\n} \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}