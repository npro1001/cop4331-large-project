{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rff96\\\\Documents\\\\GitHub\\\\cop4331-large-project\\\\client\\\\src\\\\pages\\\\LoginSignUp\\\\loginForm.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useContext } from \"react\";\nimport { AccountContext } from \"./accountContext\";\nimport { BoldLink, BoxContainer, FormContainer, Input, MutedLink, SubmitButton } from './common';\nimport { Marginer } from '../../components/marginer/index.jsx';\nimport { login, reset } from '../../features/auth/authSlice';\nimport { toast } from 'react-toastify';\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\n//login form\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function LoginForm(props) {\n  _s();\n  const [formData, setFormData] = useState({\n    username: '',\n    password: ''\n  });\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    user,\n    isError,\n    isSuccess,\n    message\n  } = useSelector(state => state.auth);\n  const {\n    username,\n    password\n  } = formData;\n\n  // Runs initially when LoginForm function is called\n  useEffect(() => {\n    // Check for error\n    // if(isError) {\n    //     toast.error(message)\n    // }\n\n    // If registered or logged in\n    if (isSuccess || user) {\n      // navigate('/testpage', {replace: true})\n      navigate('/home', {\n        replace: true\n      });\n      dispatch(reset());\n    }\n  }, [user, isError, isSuccess, message, navigate, dispatch]);\n  const onChange = e => {\n    setFormData(prevState => ({\n      ...prevState,\n      // \"Spead across previous state\"\n      [e.target.name]: e.target.value\n    }));\n  };\n  const onSubmit = e => {\n    e.preventDefault();\n    const userData = {\n      username,\n      password\n    };\n    dispatch(login(userData)).then(res => {\n      if (!(res.meta.requestStatus == \"rejected\")) {\n        navigate('/home', {\n          replace: true\n        });\n        // navigate('/testpage', {replace: true})\n      }\n    });\n  };\n\n  const forgotPass = () => {\n    navigate('/password_request', {\n      replace: true\n    });\n  };\n\n  //when user clicks \"Signup here\", the form will switch\n  const {\n    switchToSignup\n  } = useContext(AccountContext);\n\n  // TODO - RESET PASSWORD\n\n  return /*#__PURE__*/_jsxDEV(BoxContainer, {\n    children: /*#__PURE__*/_jsxDEV(FormContainer, {\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Marginer, {\n        direction: \"vertical\",\n        margin: 75\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        id: \"username\",\n        name: \"username\",\n        value: username,\n        placeholder: \"Username\",\n        onChange: onChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n        direction: \"vertical\",\n        margin: 25\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        id: \"password\",\n        name: \"password\",\n        value: password,\n        placeholder: \"Password\",\n        onChange: onChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n        direction: \"vertical\",\n        margin: 10\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(MutedLink, {\n        onClick: forgotPass,\n        children: \"Forgot your password?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n        direction: \"vertical\",\n        margin: 25\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n        type: \"submit\",\n        children: \" Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n        direction: \"vertical\",\n        margin: 15\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          display: !isError ? \"none\" : \"inline-flex\",\n          color: \"red\",\n          alignSelf: \"flex-end\",\n          margin: \"auto\"\n        },\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n        direction: \"vertical\",\n        margin: 15\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(MutedLink, {\n        children: [\"New to the club? \", /*#__PURE__*/_jsxDEV(BoldLink, {\n          href: \"#\",\n          onClick: switchToSignup,\n          children: \"Sign up here.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n          direction: \"vertical\",\n          margin: 25\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 14\n  }, this);\n}\n_s(LoginForm, \"Cji4EgZKQ1ZCW8YhJwQRKiHYyGM=\", false, function () {\n  return [useNavigate, useDispatch, useSelector];\n});\n_c = LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useContext","AccountContext","BoldLink","BoxContainer","FormContainer","Input","MutedLink","SubmitButton","Marginer","login","reset","toast","useSelector","useDispatch","useState","useEffect","useNavigate","LoginForm","props","formData","setFormData","username","password","navigate","dispatch","user","isError","isSuccess","message","state","auth","replace","onChange","e","prevState","target","name","value","onSubmit","preventDefault","userData","then","res","meta","requestStatus","forgotPass","switchToSignup","display","color","alignSelf","margin"],"sources":["C:/Users/rff96/Documents/GitHub/cop4331-large-project/client/src/pages/LoginSignUp/loginForm.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { AccountContext } from \"./accountContext\";\r\nimport { BoldLink, BoxContainer, FormContainer, Input, MutedLink, SubmitButton} from './common';\r\nimport { Marginer} from '../../components/marginer/index.jsx';\r\nimport {login, reset} from '../../features/auth/authSlice';\r\nimport  {toast} from 'react-toastify';\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {useState, useEffect} from 'react';\r\nimport {useNavigate} from 'react-router-dom';\r\n\r\n\r\n//login form\r\nexport function LoginForm(props) {\r\n    \r\n    const [formData, setFormData] = useState({\r\n        username: '',\r\n        password: '',\r\n    })\r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n    const {user, isError, isSuccess, message} = useSelector((state) => state.auth)\r\n    const {username, password} = formData\r\n    \r\n    // Runs initially when LoginForm function is called\r\n    useEffect(() => {\r\n        // Check for error\r\n        // if(isError) {\r\n        //     toast.error(message)\r\n        // }\r\n\r\n        // If registered or logged in\r\n        if(isSuccess || user) {\r\n            // navigate('/testpage', {replace: true})\r\n            navigate('/home', {replace: true})\r\n            dispatch(reset())\r\n        }\r\n    }, [user, isError, isSuccess, message, navigate, dispatch])\r\n\r\n\r\n    const onChange = (e) => {\r\n        setFormData((prevState) => ({\r\n            ...prevState, // \"Spead across previous state\"\r\n            [e.target.name]: e.target.value\r\n        }))\r\n    }\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n        const userData = {\r\n            username,\r\n            password\r\n        }\r\n\r\n        dispatch(login(userData))\r\n        .then( (res) => {\r\n            if(!(res.meta.requestStatus == \"rejected\")) {\r\n                navigate('/home', {replace: true})\r\n                // navigate('/testpage', {replace: true})\r\n            }\r\n        })\r\n    }\r\n\r\n    const forgotPass = () => {\r\n        navigate('/password_request', {replace: true})\r\n    }\r\n\r\n\r\n    //when user clicks \"Signup here\", the form will switch\r\n    const {switchToSignup } = useContext(AccountContext);\r\n\r\n    // TODO - RESET PASSWORD\r\n\r\n    return ( <BoxContainer>\r\n        <FormContainer onSubmit={onSubmit}>\r\n            <Marginer direction=\"vertical\" margin={75}/>\r\n            <Input type=\"text\" id='username' name='username'value={username} placeholder=\"Username\" onChange={onChange} required/>\r\n            <Marginer direction=\"vertical\" margin={25}/>\r\n            <Input type=\"password\" id='password' name='password' value={password} placeholder=\"Password\" onChange={onChange} required/>\r\n            <Marginer direction=\"vertical\" margin={10}/>\r\n            <MutedLink onClick={forgotPass}>Forgot your password?</MutedLink> \r\n            <Marginer direction=\"vertical\" margin={25}/>\r\n            <SubmitButton type=\"submit\"> Login</SubmitButton>\r\n            <Marginer direction=\"vertical\" margin={15}/>\r\n            <span style={{ display: !isError ? \"none\" : \"inline-flex\", color: \"red\", alignSelf: \"flex-end\", margin: \"auto\" }}>{message}</span>\r\n            <Marginer direction=\"vertical\" margin={15}/>\r\n            <MutedLink>New to the club? <BoldLink href=\"#\"  onClick={switchToSignup}>Sign up here.</BoldLink>\r\n            <Marginer direction=\"vertical\" margin={25}/>\r\n            </MutedLink>\r\n        </FormContainer>\r\n    </BoxContainer>)\r\n} "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}